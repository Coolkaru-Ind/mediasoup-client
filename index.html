<!doctype html>

<html>
	<head>
		<title>mediasoup demo</title>
		<meta charset='UTF-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
		<meta name='description' content='mediasoup demo - Cutting Edge WebRTC Video Conferencing'>

		<link rel='stylesheet' href='/mediasoup-demo-app.css?v=foo2'>

		<script src='/resources/js/antiglobal.js'></script>
		<script>
			window.localStorage.setItem('debug', '* -engine* -socket* -RIE* *WARN* *ERROR*');

			if (window.antiglobal)
			{
				window.antiglobal('___browserSync___oldSocketIo', 'io', '___browserSync___', '__core-js_shared__');
				setInterval(window.antiglobal, 180000);
			}
		</script>
		<script async src='/mediasoup-demo-app.js?v=foo2'></script>
	</head>

	<body>
		<div id='mediasoup-demo-app-container'></div>
		<div id='mediasoup-demo-app-media-query-detector'></div>

		<h1 class="text-center">Hello World</h1>
		<p>
		  <em>Please check the browser's console and run the server with the environment variable <code>DEBUG=*</code> for understanding what's happening</em>
		</p>
		<h2>Set/unset session data via express middleware (A.K.A HTTP route handlers)</h2>
		<p>
		  <a href="/login">Login </a> (A.K.A Set session variable <code>user</code>).
		</p>
		<p>
		  <a href="/logout">Logout</a> i.e. Unset session variable <code>user</code>.
		</p>
		<h2>Set/unset session data via socket.io events</h2>
		<p>
		  <a id="loginviasocket" href="/login">Login </a> (A.K.A Set session variable <code>user</code>).
		</p>
		<p>
		  <a id="logoutviasocket" href="/logout">Logout</a> i.e. Unset session variable <code>user</code>.
		</p>
		<p>
		  <a id="checksessionviasocket" href="/logout">Check session data</a>.
		</p>
		<!-- socket.io -->
		<script src="/socket.io/socket.io.js"></script>
		<script type="text/javascript">
		socket = io();
		socket.on("sessiondata", function(data) {
		  console.info("sessiondata event received. Check the console");
		  console.info("sessiondata is ", data);
		})
	
		socket.on("logged_in", function(data) {
		  console.info("logged_in event received. Check the console");
		  console.info("sessiondata after logged_in event is ", data);
		})
		socket.on("logged_out", function(data) {
		  console.info("logged_out event received. Check the console");
		  console.info("sessiondata after logged_out event is ", data);
		})
		socket.on("checksession", function(data) {
		  console.info("checksession event received. Check the console");
		  console.info("sessiondata after checksession event is ", data);
		})
	
		document.getElementById("loginviasocket").addEventListener("click", function(e) {
		  socket.emit("login");
		  e.preventDefault();
		})
		document.getElementById("logoutviasocket").addEventListener("click", function(e) {
		  socket.emit("logout");
		  e.preventDefault();
		})
		document.getElementById("checksessionviasocket").addEventListener("click", function(e) {
		  socket.emit("checksession");
		  e.preventDefault();
		})
		</script>
	</body>
</html>
